//Deobfuscated with https://github.com/PetoPetko/Minecraft-Deobfuscator3000 using mappings "1.12 stable mappings"!

// 
// Decompiled by Procyon v0.5.36
// 

package me.gopro336.goprohack.modules.exploit;

import java.util.function.Predicate;
import me.gopro336.goprohack.main.GoproHack;
import net.minecraft.util.math.MathHelper;
import net.minecraft.client.Minecraft;
import net.minecraft.init.SoundEvents;
import net.minecraft.util.SoundCategory;
import net.minecraft.network.play.server.SPacketSoundEffect;
import me.zero.alpine.fork.listener.EventHandler;
import me.gopro336.goprohack.events.network.EventNetworkPacketEvent;
import me.zero.alpine.fork.listener.Listener;
import me.gopro336.goprohack.modules.Value;
import me.gopro336.goprohack.modules.Module;

public final class ThunderHackModule extends Module
{
    public final Value<Boolean> thunder;
    @EventHandler
    private Listener<EventNetworkPacketEvent> PacketEvent;
    
    public ThunderHackModule() {
        super("ThunderHack", new String[] { "ThunderHack" }, "Popbob's favorite module...", "NONE", 5131167, ModuleType.EXPLOIT);
        this.thunder = new Value<Boolean>("Thunder", new String[] { "thund" }, "Logs in chat where thunder spawned", true);
        SPacketSoundEffect packet;
        float yaw;
        double difX;
        double difZ;
        float yaw2;
        this.PacketEvent = new Listener<EventNetworkPacketEvent>(p_Event -> {
            if (p_Event.getPacket() instanceof SPacketSoundEffect) {
                packet = (SPacketSoundEffect)p_Event.getPacket();
                if (this.thunder.getValue() && packet.getCategory() == SoundCategory.WEATHER && packet.getSound() == SoundEvents.ENTITY_LIGHTNING_THUNDER) {
                    yaw = 0.0f;
                    difX = packet.getX() - Minecraft.getMinecraft().player.posX;
                    difZ = packet.getZ() - Minecraft.getMinecraft().player.posZ;
                    yaw2 = (float)(yaw + MathHelper.wrapDegrees(Math.toDegrees(Math.atan2(difZ, difX)) - 90.0 - yaw));
                    GoproHack.SendMessage("Lightning spawned X:" + Minecraft.getMinecraft().player.posX + " Z:" + Minecraft.getMinecraft().player.posZ + " Angle:" + yaw2);
                }
            }
        }, (Predicate<EventNetworkPacketEvent>[])new Predicate[0]);
    }
}
