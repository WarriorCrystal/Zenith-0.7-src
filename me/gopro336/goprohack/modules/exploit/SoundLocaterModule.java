//Deobfuscated with https://github.com/PetoPetko/Minecraft-Deobfuscator3000 using mappings "1.12 stable mappings"!

// 
// Decompiled by Procyon v0.5.36
// 

package me.gopro336.goprohack.modules.exploit;

import java.util.function.Predicate;
import net.minecraft.network.play.server.SPacketEffect;
import me.gopro336.goprohack.main.GoproHack;
import net.minecraft.util.math.BlockPos;
import net.minecraft.client.Minecraft;
import net.minecraft.network.play.server.SPacketSpawnMob;
import me.zero.alpine.fork.listener.EventHandler;
import me.gopro336.goprohack.events.network.EventNetworkPacketEvent;
import me.zero.alpine.fork.listener.Listener;
import me.gopro336.goprohack.modules.Value;
import me.gopro336.goprohack.modules.Module;

public final class SoundLocaterModule extends Module
{
    public final Value<Boolean> slimes;
    public final Value<Boolean> Wither;
    public final Value<Boolean> EndPortal;
    public final Value<Boolean> EnderDragon;
    public final Value<Boolean> Donkey;
    @EventHandler
    private Listener<EventNetworkPacketEvent> PacketEvent;
    
    public SoundLocaterModule() {
        super("SoundLocater", new String[] { "WitherLocationModule" }, "Logs in chat where a global sound happened (Warning can send current location if server changed the packet!)", "NONE", 14397476, ModuleType.EXPLOIT);
        this.slimes = new Value<Boolean>("Slimes", new String[] { "slime" }, "Logs positions of slime spawns.", false);
        this.Wither = new Value<Boolean>("Wither", new String[] { "Wither" }, "Logs positions of Wither spawns.", false);
        this.EndPortal = new Value<Boolean>("End Portal", new String[] { "EndPortal" }, "Logs positions of EndPortal spawns.", false);
        this.EnderDragon = new Value<Boolean>("Ender Dragon", new String[] { "ED" }, "Logs positions of EnderDragon spawns.", false);
        this.Donkey = new Value<Boolean>("Donkey", new String[] { "Donkey" }, "logs location of donkey spawns", false);
        SPacketSpawnMob packet;
        Minecraft mc;
        BlockPos pos;
        SPacketEffect packet2;
        double theta;
        double theta2;
        double angle;
        double angle2;
        this.PacketEvent = new Listener<EventNetworkPacketEvent>(p_Event -> {
            if (p_Event.getPacket() instanceof SPacketSpawnMob) {
                packet = (SPacketSpawnMob)p_Event.getPacket();
                if (this.slimes.getValue()) {
                    mc = Minecraft.getMinecraft();
                    if (packet.getEntityType() == 55 && packet.getY() <= 40.0 && !mc.world.getBiome(mc.player.getPosition()).getBiomeName().toLowerCase().contains("swamp")) {
                        pos = new BlockPos(packet.getX(), packet.getY(), packet.getZ());
                        GoproHack.SendMessage("Slime Spawned in chunk X:" + mc.world.getChunk(pos).x + " Z:" + mc.world.getChunk(pos).z);
                    }
                }
                if (this.Donkey.getValue() && packet.getEntityType() == 31) {
                    GoproHack.SendMessage(String.format("Donkey spawned at %s %s %s", packet.getX(), packet.getY(), packet.getZ()));
                }
            }
            else if (p_Event.getPacket() instanceof SPacketEffect) {
                packet2 = (SPacketEffect)p_Event.getPacket();
                if (packet2.getSoundType() == 1023 && this.Wither.getValue()) {
                    theta = Math.atan2(packet2.getSoundPos().getZ() - Minecraft.getMinecraft().player.posZ, packet2.getSoundPos().getX() - Minecraft.getMinecraft().player.posX);
                    theta2 = theta + 1.5707963267948966;
                    angle = Math.toDegrees(theta2);
                    if (angle < 0.0) {
                        angle += 360.0;
                    }
                    angle2 = angle - 180.0;
                    GoproHack.SendMessage("Wither spawned in direction " + angle2 + " with y position: " + packet2.getSoundPos().getY());
                }
                else if (packet2.getSoundType() == 1038 && this.EndPortal.getValue()) {
                    GoproHack.SendMessage("End portal spawned at " + packet2.getSoundPos().toString());
                }
                else if (packet2.getSoundType() == 1028 && this.EnderDragon.getValue()) {
                    GoproHack.SendMessage("Ender dragon died at " + packet2.getSoundPos().toString());
                }
            }
        }, (Predicate<EventNetworkPacketEvent>[])new Predicate[0]);
    }
}
